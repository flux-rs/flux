<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="We do conversion twice: once before sort checking when we don’t have elaborated information and then again after sort checking after all information has been elaborated. This is the interface to configure conversion for both phases."><title>ConvPhase in flux_fhir_analysis::conv - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-b25d77b18a16a9a4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="flux_fhir_analysis" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0-nightly (636d7ff91 2024-08-19)" data-channel="nightly" data-search-js="search-ef54e092fea9c776.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-cb0df477c2d67d00.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../flux_fhir_analysis/index.html">flux_<wbr>fhir_<wbr>analysis</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">Conv<wbr>Phase</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Results">Results</a></li></ul><h3><a href="#required-associated-consts">Required Associated Constants</a></h3><ul class="block"><li><a href="#associatedconstant.EXPAND_TYPE_ALIASES">EXPAND_TYPE_ALIASES</a></li><li><a href="#associatedconstant.HAS_ELABORATED_INFORMATION">HAS_ELABORATED_INFORMATION</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.genv">genv</a></li><li><a href="#tymethod.insert_alias_reft_sort">insert_alias_reft_sort</a></li><li><a href="#tymethod.insert_bty_sort">insert_bty_sort</a></li><li><a href="#tymethod.next_const_vid">next_const_vid</a></li><li><a href="#tymethod.next_region_vid">next_region_vid</a></li><li><a href="#tymethod.next_sort_vid">next_sort_vid</a></li><li><a href="#tymethod.next_type_vid">next_type_vid</a></li><li><a href="#tymethod.owner">owner</a></li><li><a href="#tymethod.results">results</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.as_conv_ctxt">as_conv_ctxt</a></li><li><a href="#method.into_conv_ctxt">into_conv_ctxt</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In flux_<wbr>fhir_<wbr>analysis::<wbr>conv</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">flux_fhir_analysis</a>::<wbr><a href="index.html">conv</a>::<wbr><a class="trait" href="#">ConvPhase</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/flux_fhir_analysis/conv/mod.rs.html#70-110">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait ConvPhase&lt;'genv, 'tcx&gt;: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    type <a href="#associatedtype.Results" class="associatedtype">Results</a>: <a class="trait" href="trait.WfckResultsProvider.html" title="trait flux_fhir_analysis::conv::WfckResultsProvider">WfckResultsProvider</a>;

    const <a href="#associatedconstant.EXPAND_TYPE_ALIASES" class="constant">EXPAND_TYPE_ALIASES</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
    const <a href="#associatedconstant.HAS_ELABORATED_INFORMATION" class="constant">HAS_ELABORATED_INFORMATION</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;

    // Required methods
    fn <a href="#tymethod.genv" class="fn">genv</a>(&amp;self) -&gt; <a class="struct" href="../../flux_middle/global_env/struct.GlobalEnv.html" title="struct flux_middle::global_env::GlobalEnv">GlobalEnv</a>&lt;'genv, 'tcx&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.owner" class="fn">owner</a>(&amp;self) -&gt; <a class="enum" href="../../flux_middle/fhir/enum.FluxOwnerId.html" title="enum flux_middle::fhir::FluxOwnerId">FluxOwnerId</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.next_sort_vid" class="fn">next_sort_vid</a>(&amp;mut self) -&gt; <a class="struct" href="../../flux_middle/rty/struct.SortVid.html" title="struct flux_middle::rty::SortVid">SortVid</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.next_type_vid" class="fn">next_type_vid</a>(&amp;mut self) -&gt; TyVid;
<span class="item-spacer"></span>    fn <a href="#tymethod.next_region_vid" class="fn">next_region_vid</a>(&amp;mut self) -&gt; RegionVid;
<span class="item-spacer"></span>    fn <a href="#tymethod.next_const_vid" class="fn">next_const_vid</a>(&amp;mut self) -&gt; ConstVid;
<span class="item-spacer"></span>    fn <a href="#tymethod.results" class="fn">results</a>(&amp;self) -&gt; &amp;Self::<a class="associatedtype" href="trait.ConvPhase.html#associatedtype.Results" title="type flux_fhir_analysis::conv::ConvPhase::Results">Results</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.insert_bty_sort" class="fn">insert_bty_sort</a>(&amp;mut self, fhir_id: <a class="struct" href="../../flux_middle/fhir/struct.FhirId.html" title="struct flux_middle::fhir::FhirId">FhirId</a>, sort: <a class="enum" href="../../flux_middle/rty/enum.Sort.html" title="enum flux_middle::rty::Sort">Sort</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.insert_alias_reft_sort" class="fn">insert_alias_reft_sort</a>(&amp;mut self, fhir_id: <a class="struct" href="../../flux_middle/fhir/struct.FhirId.html" title="struct flux_middle::fhir::FhirId">FhirId</a>, fsort: <a class="struct" href="../../flux_middle/rty/struct.FuncSort.html" title="struct flux_middle::rty::FuncSort">FuncSort</a>);

    // Provided methods
    fn <a href="#method.into_conv_ctxt" class="fn">into_conv_ctxt</a>(self) -&gt; <a class="struct" href="struct.ConvCtxt.html" title="struct flux_fhir_analysis::conv::ConvCtxt">ConvCtxt</a>&lt;Self&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.as_conv_ctxt" class="fn">as_conv_ctxt</a>(&amp;mut self) -&gt; &amp;mut <a class="struct" href="struct.ConvCtxt.html" title="struct flux_fhir_analysis::conv::ConvCtxt">ConvCtxt</a>&lt;Self&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>We do conversion twice: once before sort checking when we don’t have elaborated information
and then again after sort checking after all information has been elaborated. This is the
interface to configure conversion for both <em>phases</em>.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><section id="associatedtype.Results" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#78">source</a><h4 class="code-header">type <a href="#associatedtype.Results" class="associatedtype">Results</a>: <a class="trait" href="trait.WfckResultsProvider.html" title="trait flux_fhir_analysis::conv::WfckResultsProvider">WfckResultsProvider</a></h4></section></div><h2 id="required-associated-consts" class="section-header">Required Associated Constants<a href="#required-associated-consts" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedconstant.EXPAND_TYPE_ALIASES" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#72">source</a><h4 class="code-header">const <a href="#associatedconstant.EXPAND_TYPE_ALIASES" class="constant">EXPAND_TYPE_ALIASES</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Whether to expand type aliases or to generate a <em>weak</em> <a href="../../flux_middle/rty/struct.AliasTy.html" title="struct flux_middle::rty::AliasTy"><code>rty::AliasTy</code></a>.</p>
</div></details><details class="toggle" open><summary><section id="associatedconstant.HAS_ELABORATED_INFORMATION" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#76">source</a><h4 class="code-header">const <a href="#associatedconstant.HAS_ELABORATED_INFORMATION" class="constant">HAS_ELABORATED_INFORMATION</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Whether we have elaborated information or not (in the first phase we will not, but in the
second we will).</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><section id="tymethod.genv" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#80">source</a><h4 class="code-header">fn <a href="#tymethod.genv" class="fn">genv</a>(&amp;self) -&gt; <a class="struct" href="../../flux_middle/global_env/struct.GlobalEnv.html" title="struct flux_middle::global_env::GlobalEnv">GlobalEnv</a>&lt;'genv, 'tcx&gt;</h4></section><section id="tymethod.owner" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#82">source</a><h4 class="code-header">fn <a href="#tymethod.owner" class="fn">owner</a>(&amp;self) -&gt; <a class="enum" href="../../flux_middle/fhir/enum.FluxOwnerId.html" title="enum flux_middle::fhir::FluxOwnerId">FluxOwnerId</a></h4></section><section id="tymethod.next_sort_vid" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#84">source</a><h4 class="code-header">fn <a href="#tymethod.next_sort_vid" class="fn">next_sort_vid</a>(&amp;mut self) -&gt; <a class="struct" href="../../flux_middle/rty/struct.SortVid.html" title="struct flux_middle::rty::SortVid">SortVid</a></h4></section><section id="tymethod.next_type_vid" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#86">source</a><h4 class="code-header">fn <a href="#tymethod.next_type_vid" class="fn">next_type_vid</a>(&amp;mut self) -&gt; TyVid</h4></section><section id="tymethod.next_region_vid" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#88">source</a><h4 class="code-header">fn <a href="#tymethod.next_region_vid" class="fn">next_region_vid</a>(&amp;mut self) -&gt; RegionVid</h4></section><section id="tymethod.next_const_vid" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#90">source</a><h4 class="code-header">fn <a href="#tymethod.next_const_vid" class="fn">next_const_vid</a>(&amp;mut self) -&gt; ConstVid</h4></section><section id="tymethod.results" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#92">source</a><h4 class="code-header">fn <a href="#tymethod.results" class="fn">results</a>(&amp;self) -&gt; &amp;Self::<a class="associatedtype" href="trait.ConvPhase.html#associatedtype.Results" title="type flux_fhir_analysis::conv::ConvPhase::Results">Results</a></h4></section><details class="toggle method-toggle" open><summary><section id="tymethod.insert_bty_sort" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#96">source</a><h4 class="code-header">fn <a href="#tymethod.insert_bty_sort" class="fn">insert_bty_sort</a>(&amp;mut self, fhir_id: <a class="struct" href="../../flux_middle/fhir/struct.FhirId.html" title="struct flux_middle::fhir::FhirId">FhirId</a>, sort: <a class="enum" href="../../flux_middle/rty/enum.Sort.html" title="enum flux_middle::rty::Sort">Sort</a>)</h4></section></summary><div class="docblock"><p>Called after converting an indexed type <code>b[e]</code> with the <code>fhir_id</code> and sort of <code>b</code>. Used
during the first phase to collect the sort of base types.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.insert_alias_reft_sort" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#100">source</a><h4 class="code-header">fn <a href="#tymethod.insert_alias_reft_sort" class="fn">insert_alias_reft_sort</a>(&amp;mut self, fhir_id: <a class="struct" href="../../flux_middle/fhir/struct.FhirId.html" title="struct flux_middle::fhir::FhirId">FhirId</a>, fsort: <a class="struct" href="../../flux_middle/rty/struct.FuncSort.html" title="struct flux_middle::rty::FuncSort">FuncSort</a>)</h4></section></summary><div class="docblock"><p>Called after converting an <a href="../../flux_middle/fhir/enum.ExprKind.html#variant.Alias" title="variant flux_middle::fhir::ExprKind::Alias"><code>fhir::ExprKind::Alias</code></a> with the sort of the resulting
<a href="../../flux_middle/rty/expr/struct.AliasReft.html" title="struct flux_middle::rty::expr::AliasReft"><code>rty::AliasReft</code></a>. Used during the first phase to collect the sorts of refinement aliases.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><section id="method.into_conv_ctxt" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#102-104">source</a><h4 class="code-header">fn <a href="#method.into_conv_ctxt" class="fn">into_conv_ctxt</a>(self) -&gt; <a class="struct" href="struct.ConvCtxt.html" title="struct flux_fhir_analysis::conv::ConvCtxt">ConvCtxt</a>&lt;Self&gt;</h4></section><section id="method.as_conv_ctxt" class="method"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#106-109">source</a><h4 class="code-header">fn <a href="#method.as_conv_ctxt" class="fn">as_conv_ctxt</a>(&amp;mut self) -&gt; &amp;mut <a class="struct" href="struct.ConvCtxt.html" title="struct flux_fhir_analysis::conv::ConvCtxt">ConvCtxt</a>&lt;Self&gt;</h4></section></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-ConvPhase%3C'genv,+'tcx%3E-for-Wf%3C'_,+'genv,+'tcx%3E" class="impl"><a class="src rightside" href="../../src/flux_fhir_analysis/wf/mod.rs.html#428-474">source</a><a href="#impl-ConvPhase%3C'genv,+'tcx%3E-for-Wf%3C'_,+'genv,+'tcx%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'genv, 'tcx&gt; <a class="trait" href="trait.ConvPhase.html" title="trait flux_fhir_analysis::conv::ConvPhase">ConvPhase</a>&lt;'genv, 'tcx&gt; for <a class="struct" href="../wf/struct.Wf.html" title="struct flux_fhir_analysis::wf::Wf">Wf</a>&lt;'_, 'genv, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="associatedconstant.EXPAND_TYPE_ALIASES-1" class="associatedconstant trait-impl"><a class="src rightside" href="../../src/flux_fhir_analysis/wf/mod.rs.html#431">source</a><a href="#associatedconstant.EXPAND_TYPE_ALIASES-1" class="anchor">§</a><h4 class="code-header">const <a href="#associatedconstant.EXPAND_TYPE_ALIASES" class="constant">EXPAND_TYPE_ALIASES</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> = false</h4></section><section id="associatedconstant.HAS_ELABORATED_INFORMATION-1" class="associatedconstant trait-impl"><a class="src rightside" href="../../src/flux_fhir_analysis/wf/mod.rs.html#432">source</a><a href="#associatedconstant.HAS_ELABORATED_INFORMATION-1" class="anchor">§</a><h4 class="code-header">const <a href="#associatedconstant.HAS_ELABORATED_INFORMATION" class="constant">HAS_ELABORATED_INFORMATION</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> = false</h4></section><section id="associatedtype.Results-1" class="associatedtype trait-impl"><a href="#associatedtype.Results-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Results" class="associatedtype">Results</a> = <a class="struct" href="../wf/sortck/struct.InferCtxt.html" title="struct flux_fhir_analysis::wf::sortck::InferCtxt">InferCtxt</a>&lt;'genv, 'tcx&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ConvPhase%3C'genv,+'tcx%3E-for-AfterSortck%3C'_,+'genv,+'tcx%3E" class="impl"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#128-169">source</a><a href="#impl-ConvPhase%3C'genv,+'tcx%3E-for-AfterSortck%3C'_,+'genv,+'tcx%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'genv, 'tcx&gt; <a class="trait" href="trait.ConvPhase.html" title="trait flux_fhir_analysis::conv::ConvPhase">ConvPhase</a>&lt;'genv, 'tcx&gt; for <a class="struct" href="struct.AfterSortck.html" title="struct flux_fhir_analysis::conv::AfterSortck">AfterSortck</a>&lt;'_, 'genv, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="associatedconstant.EXPAND_TYPE_ALIASES-2" class="associatedconstant trait-impl"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#129">source</a><a href="#associatedconstant.EXPAND_TYPE_ALIASES-2" class="anchor">§</a><h4 class="code-header">const <a href="#associatedconstant.EXPAND_TYPE_ALIASES" class="constant">EXPAND_TYPE_ALIASES</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> = true</h4></section><section id="associatedconstant.HAS_ELABORATED_INFORMATION-2" class="associatedconstant trait-impl"><a class="src rightside" href="../../src/flux_fhir_analysis/conv/mod.rs.html#130">source</a><a href="#associatedconstant.HAS_ELABORATED_INFORMATION-2" class="anchor">§</a><h4 class="code-header">const <a href="#associatedconstant.HAS_ELABORATED_INFORMATION" class="constant">HAS_ELABORATED_INFORMATION</a>: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> = true</h4></section><section id="associatedtype.Results-2" class="associatedtype trait-impl"><a href="#associatedtype.Results-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Results" class="associatedtype">Results</a> = <a class="struct" href="../../flux_middle/rty/struct.WfckResults.html" title="struct flux_middle::rty::WfckResults">WfckResults</a></h4></section></div></details></div><script src="../../trait.impl/flux_fhir_analysis/conv/trait.ConvPhase.js" async></script></section></div></main></body></html>