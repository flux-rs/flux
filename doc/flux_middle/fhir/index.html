<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Flux High-Level Intermediate Repesentation"><title>flux_middle::fhir - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="flux_middle" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (cc8da78a0 2024-07-04)" data-channel="nightly" data-search-js="search-0fe7219eb170c82e.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../flux_middle/index.html">flux_middle</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">Module fhir</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Aliases</a></li></ul></section><h2><a href="../index.html">In crate flux_middle</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">flux_middle</a>::<wbr><a class="mod" href="#">fhir</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/flux_middle/fhir.rs.html#1-1452">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Flux High-Level Intermediate Repesentation</p>
<p>The fhir corresponds to the desugared version of source level flux annotations. The main
difference with the surface syntax is that the list of refinement parameters is explicit
in fhir. For example, the following signature</p>
<p><code>fn(x: &amp;strg i32[@n]) ensures x: i32[n + 1]</code></p>
<p>desugars to</p>
<p><code>for&lt;n: int, l: loc&gt; fn(l: i32[n]; ptr(l)) ensures l: i32[n + 1]</code>.</p>
<p>The main analysis performed on the fhir is well-formedness, thus, the fhir keeps track of
spans for refinement expressions to report errors.</p>
<p>The name fhir is borrowed (pun intended) from rustc’s hir to refer to something a bit lower
than the surface syntax.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="lift/index.html" title="mod flux_middle::fhir::lift">lift</a></div><div class="desc docblock-short">“Lift” HIR types into  FHIR types.</div></li><li><div class="item-name"><a class="mod" href="visit/index.html" title="mod flux_middle::fhir::visit">visit</a></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AliasReft.html" title="struct flux_middle::fhir::AliasReft">AliasReft</a></div><div class="desc docblock-short"><code>&lt;qself as path&gt;::name</code></div></li><li><div class="item-name"><a class="struct" href="struct.AssocType.html" title="struct flux_middle::fhir::AssocType">AssocType</a></div></li><li><div class="item-name"><a class="struct" href="struct.BaseTy.html" title="struct flux_middle::fhir::BaseTy">BaseTy</a></div><div class="desc docblock-short">These are types of things that may be refined with indices or existentials</div></li><li><div class="item-name"><a class="struct" href="struct.ConstArg.html" title="struct flux_middle::fhir::ConstArg">ConstArg</a></div></li><li><div class="item-name"><a class="struct" href="struct.Crate.html" title="struct flux_middle::fhir::Crate">Crate</a></div><div class="desc docblock-short">A map between rust definitions and flux annotations in their desugared <code>fhir</code> form.</div></li><li><div class="item-name"><a class="struct" href="struct.EnumDef.html" title="struct flux_middle::fhir::EnumDef">EnumDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.Expr.html" title="struct flux_middle::fhir::Expr">Expr</a></div></li><li><div class="item-name"><a class="struct" href="struct.FhirId.html" title="struct flux_middle::fhir::FhirId">FhirId</a></div><div class="desc docblock-short">A unique identifier for a node in the AST. Like <a href="rustc_hir::HirId"><code>HirId</code></a> it is composed of an <code>owner</code> and a
<code>local_id</code>. We don’t generate ids for all nodes, but only for those we need to remember
information elaborated during well-formedness checking to later be used during conversion into
<a href="../rty/index.html" title="mod flux_middle::rty"><code>rty</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FieldDef.html" title="struct flux_middle::fhir::FieldDef">FieldDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.FnDecl.html" title="struct flux_middle::fhir::FnDecl">FnDecl</a></div></li><li><div class="item-name"><a class="struct" href="struct.FnOutput.html" title="struct flux_middle::fhir::FnOutput">FnOutput</a></div></li><li><div class="item-name"><a class="struct" href="struct.FnSig.html" title="struct flux_middle::fhir::FnSig">FnSig</a></div></li><li><div class="item-name"><a class="struct" href="struct.FuncSort.html" title="struct flux_middle::fhir::FuncSort">FuncSort</a></div></li><li><div class="item-name"><a class="struct" href="struct.GenericParam.html" title="struct flux_middle::fhir::GenericParam">GenericParam</a></div></li><li><div class="item-name"><a class="struct" href="struct.GenericPredicates.html" title="struct flux_middle::fhir::GenericPredicates">GenericPredicates</a></div></li><li><div class="item-name"><a class="struct" href="struct.Generics.html" title="struct flux_middle::fhir::Generics">Generics</a></div></li><li><div class="item-name"><a class="struct" href="struct.Impl.html" title="struct flux_middle::fhir::Impl">Impl</a></div></li><li><div class="item-name"><a class="struct" href="struct.ImplAssocReft.html" title="struct flux_middle::fhir::ImplAssocReft">ImplAssocReft</a></div></li><li><div class="item-name"><a class="struct" href="struct.ImplItem.html" title="struct flux_middle::fhir::ImplItem">ImplItem</a></div></li><li><div class="item-name"><a class="struct" href="struct.Item.html" title="struct flux_middle::fhir::Item">Item</a></div></li><li><div class="item-name"><a class="struct" href="struct.ItemLocalId.html" title="struct flux_middle::fhir::ItemLocalId">ItemLocalId</a></div><div class="desc docblock-short">An <code>ItemLocalId</code> uniquely identifies something within a given “item-like”.</div></li><li><div class="item-name"><a class="struct" href="struct.MutTy.html" title="struct flux_middle::fhir::MutTy">MutTy</a></div></li><li><div class="item-name"><a class="struct" href="struct.OpaqueTy.html" title="struct flux_middle::fhir::OpaqueTy">OpaqueTy</a></div></li><li><div class="item-name"><a class="struct" href="struct.ParamId.html" title="struct flux_middle::fhir::ParamId">ParamId</a></div></li><li><div class="item-name"><a class="struct" href="struct.Path.html" title="struct flux_middle::fhir::Path">Path</a></div></li><li><div class="item-name"><a class="struct" href="struct.PathExpr.html" title="struct flux_middle::fhir::PathExpr">PathExpr</a></div></li><li><div class="item-name"><a class="struct" href="struct.PathSegment.html" title="struct flux_middle::fhir::PathSegment">PathSegment</a></div></li><li><div class="item-name"><a class="struct" href="struct.PolyFuncSort.html" title="struct flux_middle::fhir::PolyFuncSort">PolyFuncSort</a></div></li><li><div class="item-name"><a class="struct" href="struct.PolyTraitRef.html" title="struct flux_middle::fhir::PolyTraitRef">PolyTraitRef</a></div></li><li><div class="item-name"><a class="struct" href="struct.Qualifier.html" title="struct flux_middle::fhir::Qualifier">Qualifier</a></div></li><li><div class="item-name"><a class="struct" href="struct.RefineArg.html" title="struct flux_middle::fhir::RefineArg">RefineArg</a></div></li><li><div class="item-name"><a class="struct" href="struct.RefineParam.html" title="struct flux_middle::fhir::RefineParam">RefineParam</a></div></li><li><div class="item-name"><a class="struct" href="struct.RefinedBy.html" title="struct flux_middle::fhir::RefinedBy">RefinedBy</a></div><div class="desc docblock-short">Information about the refinement parameters associated with a type alias or an adt (struct/enum).</div></li><li><div class="item-name"><a class="struct" href="struct.Requires.html" title="struct flux_middle::fhir::Requires">Requires</a></div><div class="desc docblock-short">A predicate required to hold before calling a function.</div></li><li><div class="item-name"><a class="struct" href="struct.SortDecl.html" title="struct flux_middle::fhir::SortDecl">SortDecl</a></div></li><li><div class="item-name"><a class="struct" href="struct.SortPath.html" title="struct flux_middle::fhir::SortPath">SortPath</a></div><div class="desc docblock-short">See <a href="../../flux_syntax/surface/struct.SortPath.html" title="struct flux_syntax::surface::SortPath"><code>flux_syntax::surface::SortPath</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.SpecFunc.html" title="struct flux_middle::fhir::SpecFunc">SpecFunc</a></div></li><li><div class="item-name"><a class="struct" href="struct.StructDef.html" title="struct flux_middle::fhir::StructDef">StructDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.Trait.html" title="struct flux_middle::fhir::Trait">Trait</a></div></li><li><div class="item-name"><a class="struct" href="struct.TraitAssocReft.html" title="struct flux_middle::fhir::TraitAssocReft">TraitAssocReft</a></div></li><li><div class="item-name"><a class="struct" href="struct.TraitItem.html" title="struct flux_middle::fhir::TraitItem">TraitItem</a></div></li><li><div class="item-name"><a class="struct" href="struct.Ty.html" title="struct flux_middle::fhir::Ty">Ty</a></div></li><li><div class="item-name"><a class="struct" href="struct.TyAlias.html" title="struct flux_middle::fhir::TyAlias">TyAlias</a></div></li><li><div class="item-name"><a class="struct" href="struct.TypeBinding.html" title="struct flux_middle::fhir::TypeBinding">TypeBinding</a></div></li><li><div class="item-name"><a class="struct" href="struct.VariantDef.html" title="struct flux_middle::fhir::VariantDef">VariantDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.VariantIdx.html" title="struct flux_middle::fhir::VariantIdx">VariantIdx</a></div><div class="desc docblock-short">The <em>source-order</em> index of a variant in a type.</div></li><li><div class="item-name"><a class="struct" href="struct.VariantRet.html" title="struct flux_middle::fhir::VariantRet">VariantRet</a></div></li><li><div class="item-name"><a class="struct" href="struct.WhereBoundPredicate.html" title="struct flux_middle::fhir::WhereBoundPredicate">WhereBoundPredicate</a></div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.BaseTyKind.html" title="enum flux_middle::fhir::BaseTyKind">BaseTyKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.BinOp.html" title="enum flux_middle::fhir::BinOp">BinOp</a></div></li><li><div class="item-name"><a class="enum" href="enum.ConstArgKind.html" title="enum flux_middle::fhir::ConstArgKind">ConstArgKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.Ensures.html" title="enum flux_middle::fhir::Ensures">Ensures</a></div></li><li><div class="item-name"><a class="enum" href="enum.ExprKind.html" title="enum flux_middle::fhir::ExprKind">ExprKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.ExprRes.html" title="enum flux_middle::fhir::ExprRes">ExprRes</a></div></li><li><div class="item-name"><a class="enum" href="enum.FluxItem.html" title="enum flux_middle::fhir::FluxItem">FluxItem</a></div></li><li><div class="item-name"><a class="enum" href="enum.FluxLocalDefId.html" title="enum flux_middle::fhir::FluxLocalDefId">FluxLocalDefId</a></div></li><li><div class="item-name"><a class="enum" href="enum.FluxOwnerId.html" title="enum flux_middle::fhir::FluxOwnerId">FluxOwnerId</a></div><div class="desc docblock-short">Owner version of <a href="enum.FluxLocalDefId.html" title="enum flux_middle::fhir::FluxLocalDefId"><code>FluxLocalDefId</code></a></div></li><li><div class="item-name"><a class="enum" href="enum.GenericArg.html" title="enum flux_middle::fhir::GenericArg">GenericArg</a></div></li><li><div class="item-name"><a class="enum" href="enum.GenericBound.html" title="enum flux_middle::fhir::GenericBound">GenericBound</a></div></li><li><div class="item-name"><a class="enum" href="enum.GenericParamKind.html" title="enum flux_middle::fhir::GenericParamKind">GenericParamKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.Ignored.html" title="enum flux_middle::fhir::Ignored">Ignored</a></div><div class="desc docblock-short">A boolean used to mark whether a piece of code is ignored.</div></li><li><div class="item-name"><a class="enum" href="enum.ImplItemKind.html" title="enum flux_middle::fhir::ImplItemKind">ImplItemKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.InferMode.html" title="enum flux_middle::fhir::InferMode">InferMode</a></div><div class="desc docblock-short"><em>Infer</em>ence <em>mode</em> for a parameter.</div></li><li><div class="item-name"><a class="enum" href="enum.ItemKind.html" title="enum flux_middle::fhir::ItemKind">ItemKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.Lifetime.html" title="enum flux_middle::fhir::Lifetime">Lifetime</a></div><div class="desc docblock-short">Our surface syntax doesn’t have lifetimes. To deal with them we create a <em>hole</em> for every lifetime
which we then resolve during <code>annot_check</code> when zipping against the lifted version.</div></li><li><div class="item-name"><a class="enum" href="enum.Lit.html" title="enum flux_middle::fhir::Lit">Lit</a></div></li><li><div class="item-name"><a class="enum" href="enum.Mutability.html" title="enum flux_middle::fhir::Mutability">Mutability</a></div></li><li><div class="item-name"><a class="enum" href="enum.Node.html" title="enum flux_middle::fhir::Node">Node</a></div></li><li><div class="item-name"><a class="enum" href="enum.ParamKind.html" title="enum flux_middle::fhir::ParamKind">ParamKind</a></div><div class="desc docblock-short">How the parameter was declared in the surface syntax. This is used to adjust how errors are
reported and to control the <a href="enum.InferMode.html" title="enum flux_middle::fhir::InferMode">inference mode</a>.</div></li><li><div class="item-name"><a class="enum" href="enum.PrimSort.html" title="enum flux_middle::fhir::PrimSort">PrimSort</a></div></li><li><div class="item-name"><a class="enum" href="enum.PrimTy.html" title="enum flux_middle::fhir::PrimTy">PrimTy</a></div><div class="desc docblock-short">Not represented directly in the AST; referred to by name through a <code>ty_path</code>.</div></li><li><div class="item-name"><a class="enum" href="enum.QPath.html" title="enum flux_middle::fhir::QPath">QPath</a></div></li><li><div class="item-name"><a class="enum" href="enum.RefineArgKind.html" title="enum flux_middle::fhir::RefineArgKind">RefineArgKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.Res.html" title="enum flux_middle::fhir::Res">Res</a></div></li><li><div class="item-name"><a class="enum" href="enum.Sort.html" title="enum flux_middle::fhir::Sort">Sort</a></div></li><li><div class="item-name"><a class="enum" href="enum.SortRes.html" title="enum flux_middle::fhir::SortRes">SortRes</a></div></li><li><div class="item-name"><a class="enum" href="enum.SpecFuncKind.html" title="enum flux_middle::fhir::SpecFuncKind">SpecFuncKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.StructKind.html" title="enum flux_middle::fhir::StructKind">StructKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.TraitBoundModifier.html" title="enum flux_middle::fhir::TraitBoundModifier">TraitBoundModifier</a></div></li><li><div class="item-name"><a class="enum" href="enum.TraitItemKind.html" title="enum flux_middle::fhir::TraitItemKind">TraitItemKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.Trusted.html" title="enum flux_middle::fhir::Trusted">Trusted</a></div><div class="desc docblock-short">A boolean used to mark whether to mark wether code should be trusted.</div></li><li><div class="item-name"><a class="enum" href="enum.TyKind.html" title="enum flux_middle::fhir::TyKind">TyKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.UnOp.html" title="enum flux_middle::fhir::UnOp">UnOp</a></div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Arena.html" title="type flux_middle::fhir::Arena">Arena</a></div></li><li><div class="item-name"><a class="type" href="type.GenericBounds.html" title="type flux_middle::fhir::GenericBounds">GenericBounds</a></div></li><li><div class="item-name"><a class="type" href="type.SortDecls.html" title="type flux_middle::fhir::SortDecls">SortDecls</a></div></li></ul></section></div></main></body></html>