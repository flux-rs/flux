<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Flux High-Level Intermediate Repesentation"><title>flux_middle::fhir - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="flux_middle" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0-nightly (7adc89b69 2023-11-07)" data-channel="nightly" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../flux_middle/index.html">flux_middle</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">Module fhir</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Aliases</a></li></ul></section><h2><a href="../index.html">In crate flux_middle</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‚ÄòS‚Äô to search, ‚Äò?‚Äô for more options‚Ä¶" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">flux_middle</a>::<wbr><a class="mod" href="#">fhir</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/flux_middle/fhir.rs.html#1-1742">source</a> ¬∑ <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Flux High-Level Intermediate Repesentation</p>
<p>The fhir corresponds to the desugared version of source level flux annotations. The main
difference with the surface syntax is that the list of refinement parameters is explicit
in fhir. For example, the following signature</p>
<p><code>fn(x: &amp;strg i32[@n]) ensures x: i32[n + 1]</code></p>
<p>desugars to</p>
<p><code>for&lt;n: int, l: loc&gt; fn(l: i32[n]; ptr(l)) ensures l: i32[n + 1]</code>.</p>
<p>The main analysis performed on the fhir is well-formedness, thus, the fhir keeps track of
spans for refinement expressions to report errors.</p>
<p>The name fhir is borrowed (pun intended) from rustc‚Äôs hir to refer to something a bit lower
than the surface syntax.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="lift/index.html" title="mod flux_middle::fhir::lift">lift</a></div><div class="desc docblock-short">‚ÄúLift‚Äù HIR types into  FHIR types.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ArrayLen.html" title="struct flux_middle::fhir::ArrayLen">ArrayLen</a></div></li><li><div class="item-name"><a class="struct" href="struct.BaseTy.html" title="struct flux_middle::fhir::BaseTy">BaseTy</a></div><div class="desc docblock-short">These are types of things that may be refined with indices or existentials</div></li><li><div class="item-name"><a class="struct" href="struct.ConstInfo.html" title="struct flux_middle::fhir::ConstInfo">ConstInfo</a></div></li><li><div class="item-name"><a class="struct" href="struct.Defn.html" title="struct flux_middle::fhir::Defn">Defn</a></div></li><li><div class="item-name"><a class="struct" href="struct.EnumDef.html" title="struct flux_middle::fhir::EnumDef">EnumDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.Expr.html" title="struct flux_middle::fhir::Expr">Expr</a></div></li><li><div class="item-name"><a class="struct" href="struct.FhirId.html" title="struct flux_middle::fhir::FhirId">FhirId</a></div><div class="desc docblock-short">A unique identifier for a node in the AST. Like <a href="rustc_hir::HirId"><code>HirId</code></a> it is composed of an <code>owner</code> and a
<code>local_id</code>. We don‚Äôt generate ids for all nodes, but only for those we need to remember
information elaborated during well-formedness checking to later be used during conversion into
<a href="../rty/index.html" title="mod flux_middle::rty"><code>rty</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FieldDef.html" title="struct flux_middle::fhir::FieldDef">FieldDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.FnInfo.html" title="struct flux_middle::fhir::FnInfo">FnInfo</a></div></li><li><div class="item-name"><a class="struct" href="struct.FnOutput.html" title="struct flux_middle::fhir::FnOutput">FnOutput</a></div></li><li><div class="item-name"><a class="struct" href="struct.FnSig.html" title="struct flux_middle::fhir::FnSig">FnSig</a></div></li><li><div class="item-name"><a class="struct" href="struct.FuncDecl.html" title="struct flux_middle::fhir::FuncDecl">FuncDecl</a></div></li><li><div class="item-name"><a class="struct" href="struct.FuncSort.html" title="struct flux_middle::fhir::FuncSort">FuncSort</a></div></li><li><div class="item-name"><a class="struct" href="struct.GenericParam.html" title="struct flux_middle::fhir::GenericParam">GenericParam</a></div></li><li><div class="item-name"><a class="struct" href="struct.GenericPredicates.html" title="struct flux_middle::fhir::GenericPredicates">GenericPredicates</a></div></li><li><div class="item-name"><a class="struct" href="struct.Generics.html" title="struct flux_middle::fhir::Generics">Generics</a></div></li><li><div class="item-name"><a class="struct" href="struct.Ident.html" title="struct flux_middle::fhir::Ident">Ident</a></div></li><li><div class="item-name"><a class="struct" href="struct.ItemLocalId.html" title="struct flux_middle::fhir::ItemLocalId">ItemLocalId</a></div><div class="desc docblock-short">An <code>ItemLocalId</code> uniquely identifies something within a given ‚Äúitem-like‚Äù.</div></li><li><div class="item-name"><a class="struct" href="struct.LocalTableInContext.html" title="struct flux_middle::fhir::LocalTableInContext">LocalTableInContext</a></div></li><li><div class="item-name"><a class="struct" href="struct.LocalTableInContextMut.html" title="struct flux_middle::fhir::LocalTableInContextMut">LocalTableInContextMut</a></div></li><li><div class="item-name"><a class="struct" href="struct.Map.html" title="struct flux_middle::fhir::Map">Map</a></div><div class="desc docblock-short">A map between rust definitions and flux annotations in their desugared <code>fhir</code> form.</div></li><li><div class="item-name"><a class="struct" href="struct.MutTy.html" title="struct flux_middle::fhir::MutTy">MutTy</a></div></li><li><div class="item-name"><a class="struct" href="struct.Name.html" title="struct flux_middle::fhir::Name">Name</a></div></li><li><div class="item-name"><a class="struct" href="struct.OpaqueTy.html" title="struct flux_middle::fhir::OpaqueTy">OpaqueTy</a></div></li><li><div class="item-name"><a class="struct" href="struct.Path.html" title="struct flux_middle::fhir::Path">Path</a></div></li><li><div class="item-name"><a class="struct" href="struct.PolyFuncSort.html" title="struct flux_middle::fhir::PolyFuncSort">PolyFuncSort</a></div></li><li><div class="item-name"><a class="struct" href="struct.PolyTraitRef.html" title="struct flux_middle::fhir::PolyTraitRef">PolyTraitRef</a></div></li><li><div class="item-name"><a class="struct" href="struct.Qualifier.html" title="struct flux_middle::fhir::Qualifier">Qualifier</a></div></li><li><div class="item-name"><a class="struct" href="struct.RefineParam.html" title="struct flux_middle::fhir::RefineParam">RefineParam</a></div></li><li><div class="item-name"><a class="struct" href="struct.RefinedBy.html" title="struct flux_middle::fhir::RefinedBy">RefinedBy</a></div><div class="desc docblock-short">Information about the refinement parameters associated with a type alias or a struct/enum.</div></li><li><div class="item-name"><a class="struct" href="struct.SortDecl.html" title="struct flux_middle::fhir::SortDecl">SortDecl</a></div></li><li><div class="item-name"><a class="struct" href="struct.SortVid.html" title="struct flux_middle::fhir::SortVid">SortVid</a></div><div class="desc docblock-short">A <em>Sort</em> <em>v</em>variable <em>id</em></div></li><li><div class="item-name"><a class="struct" href="struct.StructDef.html" title="struct flux_middle::fhir::StructDef">StructDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.Ty.html" title="struct flux_middle::fhir::Ty">Ty</a></div></li><li><div class="item-name"><a class="struct" href="struct.TyAlias.html" title="struct flux_middle::fhir::TyAlias">TyAlias</a></div></li><li><div class="item-name"><a class="struct" href="struct.TypeBinding.html" title="struct flux_middle::fhir::TypeBinding">TypeBinding</a></div></li><li><div class="item-name"><a class="struct" href="struct.VariantDef.html" title="struct flux_middle::fhir::VariantDef">VariantDef</a></div></li><li><div class="item-name"><a class="struct" href="struct.VariantIdx.html" title="struct flux_middle::fhir::VariantIdx">VariantIdx</a></div><div class="desc docblock-short">The <em>source-order</em> index of a variant in a type.</div></li><li><div class="item-name"><a class="struct" href="struct.VariantRet.html" title="struct flux_middle::fhir::VariantRet">VariantRet</a></div></li><li><div class="item-name"><a class="struct" href="struct.WfckResults.html" title="struct flux_middle::fhir::WfckResults">WfckResults</a></div></li><li><div class="item-name"><a class="struct" href="struct.WhereBoundPredicate.html" title="struct flux_middle::fhir::WhereBoundPredicate">WhereBoundPredicate</a></div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.BaseTyKind.html" title="enum flux_middle::fhir::BaseTyKind">BaseTyKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.BinOp.html" title="enum flux_middle::fhir::BinOp">BinOp</a></div></li><li><div class="item-name"><a class="enum" href="enum.Coercion.html" title="enum flux_middle::fhir::Coercion">Coercion</a></div></li><li><div class="item-name"><a class="enum" href="enum.Constraint.html" title="enum flux_middle::fhir::Constraint">Constraint</a></div></li><li><div class="item-name"><a class="enum" href="enum.ExprKind.html" title="enum flux_middle::fhir::ExprKind">ExprKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.FluxItem.html" title="enum flux_middle::fhir::FluxItem">FluxItem</a></div></li><li><div class="item-name"><a class="enum" href="enum.FluxLocalDefId.html" title="enum flux_middle::fhir::FluxLocalDefId">FluxLocalDefId</a></div></li><li><div class="item-name"><a class="enum" href="enum.FluxOwnerId.html" title="enum flux_middle::fhir::FluxOwnerId">FluxOwnerId</a></div><div class="desc docblock-short">Owner version of <a href="enum.FluxLocalDefId.html" title="enum flux_middle::fhir::FluxLocalDefId"><code>FluxLocalDefId</code></a></div></li><li><div class="item-name"><a class="enum" href="enum.Func.html" title="enum flux_middle::fhir::Func">Func</a></div></li><li><div class="item-name"><a class="enum" href="enum.FuncKind.html" title="enum flux_middle::fhir::FuncKind">FuncKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.GenericArg.html" title="enum flux_middle::fhir::GenericArg">GenericArg</a></div></li><li><div class="item-name"><a class="enum" href="enum.GenericBound.html" title="enum flux_middle::fhir::GenericBound">GenericBound</a></div></li><li><div class="item-name"><a class="enum" href="enum.GenericParamKind.html" title="enum flux_middle::fhir::GenericParamKind">GenericParamKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.InferMode.html" title="enum flux_middle::fhir::InferMode">InferMode</a></div><div class="desc docblock-short"><em>Infer</em>ence <em>mode</em> for parameter at function calls</div></li><li><div class="item-name"><a class="enum" href="enum.Lifetime.html" title="enum flux_middle::fhir::Lifetime">Lifetime</a></div><div class="desc docblock-short">Our surface syntax doesn‚Äôt have lifetimes. To deal with them we create a <em>hole</em> for every lifetime
which we then resolve during <code>annot_check</code> when zipping against the lifted version.</div></li><li><div class="item-name"><a class="enum" href="enum.Lit.html" title="enum flux_middle::fhir::Lit">Lit</a></div></li><li><div class="item-name"><a class="enum" href="enum.Mutability.html" title="enum flux_middle::fhir::Mutability">Mutability</a></div></li><li><div class="item-name"><a class="enum" href="enum.PrimTy.html" title="enum flux_middle::fhir::PrimTy">PrimTy</a></div><div class="desc docblock-short">Not represented directly in the AST; referred to by name through a <code>ty_path</code>.</div></li><li><div class="item-name"><a class="enum" href="enum.QPath.html" title="enum flux_middle::fhir::QPath">QPath</a></div></li><li><div class="item-name"><a class="enum" href="enum.RefineArg.html" title="enum flux_middle::fhir::RefineArg">RefineArg</a></div></li><li><div class="item-name"><a class="enum" href="enum.Res.html" title="enum flux_middle::fhir::Res">Res</a></div></li><li><div class="item-name"><a class="enum" href="enum.Sort.html" title="enum flux_middle::fhir::Sort">Sort</a></div></li><li><div class="item-name"><a class="enum" href="enum.SortCtor.html" title="enum flux_middle::fhir::SortCtor">SortCtor</a></div></li><li><div class="item-name"><a class="enum" href="enum.StructKind.html" title="enum flux_middle::fhir::StructKind">StructKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.TraitBoundModifier.html" title="enum flux_middle::fhir::TraitBoundModifier">TraitBoundModifier</a></div></li><li><div class="item-name"><a class="enum" href="enum.TyKind.html" title="enum flux_middle::fhir::TyKind">TyKind</a></div></li><li><div class="item-name"><a class="enum" href="enum.UnOp.html" title="enum flux_middle::fhir::UnOp">UnOp</a></div></li><li><div class="item-name"><a class="enum" href="enum.WeakKind.html" title="enum flux_middle::fhir::WeakKind">WeakKind</a></div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Aliases</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Cache.html" title="type flux_middle::fhir::Cache">Cache</a><span title="Restricted Visibility">&nbsp;üîí</span> </div></li><li><div class="item-name"><a class="type" href="type.GenericBounds.html" title="type flux_middle::fhir::GenericBounds">GenericBounds</a></div></li><li><div class="item-name"><a class="type" href="type.ItemLocalMap.html" title="type flux_middle::fhir::ItemLocalMap">ItemLocalMap</a></div></li><li><div class="item-name"><a class="type" href="type.ItemPredicates.html" title="type flux_middle::fhir::ItemPredicates">ItemPredicates</a></div></li><li><div class="item-name"><a class="type" href="type.SortDecls.html" title="type flux_middle::fhir::SortDecls">SortDecls</a></div></li><li><div class="item-name"><a class="type" href="type.SurfaceIdent.html" title="type flux_middle::fhir::SurfaceIdent">SurfaceIdent</a></div></li></ul></section></div></main></body></html>