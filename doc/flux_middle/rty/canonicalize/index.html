<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A canonical type is a type where all existentials and constraint predicates are hoisted to the top level. For example, the canonical version of `(‚àÉa. i32[a], ‚àÉb. { i32[b] | b &gt; 0})` is `‚àÉa,b. { (i32[a], i32[b]) | b &gt; 0}`."><title>flux_middle::rty::canonicalize - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="flux_middle" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0-nightly (7adc89b69 2023-11-07)" data-channel="nightly" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../flux_middle/index.html">flux_middle</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">Module canonicalize</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section><h2><a href="../index.html">In flux_middle::rty</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‚ÄòS‚Äô to search, ‚Äò?‚Äô for more options‚Ä¶" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">flux_middle</a>::<wbr><a href="../index.html">rty</a>::<wbr><a class="mod" href="#">canonicalize</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/flux_middle/rty/canonicalize.rs.html#1-195">source</a> ¬∑ <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A canonical type is a type where all <a href="../enum.TyKind.html#variant.Exists" title="variant flux_middle::rty::TyKind::Exists">existentials</a> and <a href="../enum.TyKind.html#variant.Constr" title="variant flux_middle::rty::TyKind::Constr">constraint predicates</a> are <em>hoisted</em> to
the top level. For example, the canonical version of <code>(‚àÉa. i32[a], ‚àÉb. { i32[b] | b &gt; 0})</code> is
<code>‚àÉa,b. { (i32[a], i32[b]) | b &gt; 0}</code>.</p>
<p>Canonicalization can be <em>shallow</em> or <em>deep</em>, by this we mean that some type constructors
introduce new ‚Äúscopes‚Äù that limit the hoisting. For instance, we are not allowed (in general) to
hoist an existential type out of a generic argument, for example, in <code>Vec&lt;‚àÉv. i32[v]&gt;</code> the
existential inside the <code>Vec</code> cannot be hoisted out. However, the type inside the generic argument
can be canonizalized locally inside the scope of the generic argument. Shallow canonicalization
stops when finding type constructors. In contrast, deep canonicalization also canonizalizes inside
type constructors. Note that some type constructors like shared references or boxes are transparent
to hoisting and do not introduce a new scope.</p>
<p>It‚Äôs also important to note that canonizalization doesn‚Äôt imply any form of semantic equality
and it is just a best effort to facilitate syntactic manipulation. For example, the types
<code>‚àÉa,b. (i32[a], i32[b])</code> and <code>‚àÉa,b. (i32[b], i32[a])</code> are semantically equal but both are in
canonical form (in the current implementation).</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="pretty/index.html" title="mod flux_middle::rty::canonicalize::pretty">pretty</a><span title="Restricted Visibility">&nbsp;üîí</span> </div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.CanonicalConstrTy.html" title="struct flux_middle::rty::canonicalize::CanonicalConstrTy">CanonicalConstrTy</a></div></li><li><div class="item-name"><a class="struct" href="struct.ShallowHoister.html" title="struct flux_middle::rty::canonicalize::ShallowHoister">ShallowHoister</a></div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.CanonicalTy.html" title="enum flux_middle::rty::canonicalize::CanonicalTy">CanonicalTy</a></div><div class="desc docblock-short">A (shallowly) canonicalized type. This can be either of the form <code>{T | p}</code> or <code>‚àÉv0,‚Ä¶,vn. {T | p}</code>,
where <code>T</code> doesnt have any (shallow) <a href="../enum.TyKind.html#variant.Exists" title="variant flux_middle::rty::TyKind::Exists">existential</a> or <a href="../enum.TyKind.html#variant.Constr" title="variant flux_middle::rty::TyKind::Constr">constraint</a> types.</div></li></ul></section></div></main></body></html>